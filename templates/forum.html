{% extends "base.html" %}

{% block title %}Forum | CodeByEfe{% endblock %}

{% block content %}
<section style="margin-top: 40px; max-width: 800px; margin-left: auto; margin-right: auto;">
  <h2 style="text-align:center;">ğŸ’¬ Forum SayfasÄ±</h2>
  <p style="text-align:center;">Websitesi iÃ§in yorumunuzu ve puanÄ±nÄ±zÄ± paylaÅŸabilirsiniz.</p>

  {% if yorum_sayisi > 0 %}
    <div style="text-align:center; font-size: 18px; margin: 20px 0; color: #FFD700;">
      ğŸ”¢ Ortalama Puan: <strong>{{ ortalama }}</strong> / 5 <br>
      {% for _ in range(dolu_yildiz) %}
        â­
      {% endfor %}
      {% for _ in range(bos_yildiz) %}
        â˜†
      {% endfor %}
      <br>
      ğŸ’¬ Toplam Yorum: {{ yorum_sayisi }}
    </div>
  {% endif %}

  {% if username %}
    <!-- GÄ°RÄ°Å YAPILDIYSA YORUM FORMU -->
    <form action="/forum" method="POST" style="margin-top: 30px;">
      <input type="text" name="isim" value="{{ username }}" readonly style="width: 100%; padding: 10px; margin-bottom: 10px; border-radius: 8px;">
      <textarea name="yorum" placeholder="Yorumunuz..." required style="width: 100%; padding: 10px; margin-bottom: 10px; border-radius: 8px;"></textarea>
      <label for="puan">Puan:</label>
      <select name="puan" required style="margin-left: 10px; padding: 5px;">
        <option value="5">â­â­â­â­â­</option>
        <option value="4">â­â­â­â­</option>
        <option value="3">â­â­â­</option>
        <option value="2">â­â­</option>
        <option value="1">â­</option>
      </select>
      <br><br>
      <button type="submit" class="btn">GÃ¶nder</button>
    </form>
  {% else %}
    <!-- GÄ°RÄ°Å YAPILMAMIÅSA BÄ°LGÄ° -->
    <p style="text-align: center; margin-top: 30px; color: red;">
      Yorum yapabilmek iÃ§in <a href="/login" style="color: #00c3ff;">giriÅŸ yapÄ±n</a>.
    </p>
  {% endif %}

  <!-- YORUMLAR -->
  <div style="margin-top: 40px;">
    <h3>ğŸ“ YapÄ±lan Yorumlar:</h3>
    {% if yorumlar %}
      {% for y in yorumlar %}
        <div style="margin-bottom: 20px; padding: 15px; background-color: rgba(255,255,255,0.05); border-radius: 8px;">
          <strong>{{ y.isim }}</strong> â€“ {{ y.puan }} â­ <br>
          <small><em>{{ y.tarih }}</em></small>
          <p>{{ y.yazi }}</p>
        </div>
      {% endfor %}
    {% else %}
      <p>HenÃ¼z yorum yapÄ±lmadÄ±.</p>
    {% endif %}
  </div>
</section>
{% endblock %}
